<!-- START_METADATA
---
title: Idempotency
pagination_next: null
pagination_prev: null
---
END_METADATA -->

# Idempotency

Many API requests to Vipps APIs can be retried without any side effects
by providing `Idempotency-key`(in older APIs, this may be called, `Request-Id`) in the header of the
request. For example, in case the request fails because of network error, it can
safely be retried with the same `Idempotency-key` key. The `Idempotency-key` key must be
generated by the merchant.

You can use any unique id for your idempotency header.

For example:

```json
Request-Id: slvnwdcweofjwefweklfwelf
```

## Recurring API

**Important:** If the response is a client-error (4xx), you will continue to get the same error as long as you use the same idempotency-key, as the requested operation is not retried.

**Important:** If you reuse an idempotency-key on a different request, you will get a 409 CONFLICT.

## eCom API

In a capture request, the merchant may also use the `X-Request-Id` header.
This header is an idempotency header ensuring that, if the merchant retries
a request with the same `X-Request-Id`, the retried request will not make
additional changes.


Example Request:

[`POST:/ecomm/v2/payments/acme-shop-123-order123abc/capture`](https://vippsas.github.io/vipps-developer-docs/api/ecom#tag/Vipps-eCom-API/operation/capturePaymentUsingPOST)

```json
{
  "merchantInfo": {
    "merchantSerialNumber": "123456"
  },
  "transaction": {
    "amount": 20000,
    "transactionText": "Socks on the way! Tracking code: abc-tracking-123"
  }
}
```

Response:

```json
{
  "orderId": "acme-shop-123-order123abc",
  "transactionInfo": {
    "amount": 20000,
    "timeStamp": "2018-11-14T15:22:46.736Z",
    "transactionText": "Socks on the way! Tracking code: abc-tracking-123",
    "status": "Captured",
    "transactionId": "5001420058"
  },
  "transactionSummary": {
    "capturedAmount": 20000,
    "remainingAmountToCapture": 0,
    "refundedAmount": 0,
    "remainingAmountToRefund": 20000
  }
}
```
