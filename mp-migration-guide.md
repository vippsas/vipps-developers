<!-- START_METADATA
---
title: MobilePay migration guide
sidebar_label: Migration guide
sidebar_position: 10
pagination_next: null
pagination_prev: null
draft: false
---
END_METADATA -->

# Migration guide


ðŸ’¥ Work in progress ðŸ’¥

Are you currently using MobilePay APIs for your payment integration needs?

In that case, weâ€™re excited to introduce you to Vipps MobilePay APIs, a reliable and versatile payment solution that can make the migration hassle-free and even dazzle you with its ease of use and features.
To ensure a smooth transition, we recommend using our comprehensive migration guide, which will provide step-by-step instructions and best practices for integrating with Vipps MobilePay APIs.

This document is still under development.
Here is a quick summary of key facts and shortcuts for our APIsâ€‹.

## Subscriptions vs. Recurring

API documentation:

* [Access token API](https://developer.vippsmobilepay.com/docs/APIs/access-token-api)
* [ePayment API](https://vippsas.github.io/vipps-developer-docs/docs/APIs/epayment-api)
* [Recurring API](https://vippsas.github.io/vipps-developer-docs/docs/APIs/recurring-api)
* [MobilePay Subscriptions API](https://developer.mobilepay.dk/api/subscriptions)

### Agreement

See:
[Agreements](https://vippsas.github.io/vipps-developer-docs/docs/APIs/recurring-api/vipps-recurring-api#agreements).

| MOBILEPAY AGREEMENT               â€‹ | VIPPS MOBILEPAY AGREEMENTâ€‹                                                                              |
|------------------------------------|--------------------------------------------------------------------------------------------------------|
| `DescriptionÂ â€‹`                     | `productDescriptionâ€‹`                                                                                   |
| `Amountâ€‹`                           | `pricing: { "type"("LEGACY" => amount ,"VARIABLE" =>Â suggestedMaxAmount),Â "currency"("NOK") }`        â€‹ |
| `Frequencyâ€‹`                        | `interval: { "unit"("YEAR" "MONTH" "WEEK" "DAY"), "count"([1..31]) }`                                 â€‹ |
| `Links`: [`user-redirect`, `success-callback`, `cancel-callback`, `cancel-redirect`]Â  | `merchantRedirectUrl` + `merchantAgreementUrlâ€‹`      |
| `Planâ€‹`                             | `productNameâ€‹`                                                                                          |
| `mobile_phone_numberâ€‹`              | `phoneNumberâ€‹`                                                                                          |
| `external_idâ€‹`                      | `externalIdâ€‹` |
| `currencyâ€‹`                         | ?â€‹ |
| `country_codeâ€‹`                     | ?â€‹ |
| `expiration_timeout_minutesâ€‹`       | ?â€‹ |
| `retention_period_hoursâ€‹`           | ?â€‹ |
| `disable_notification_managementâ€‹`  | ?â€‹ |
| `notifications_onâ€‹`                 | ?â€‹ |
| ?â€‹                                  | `scope` (Space separated list of the user profile-data scope to require for theÂ agreement)â€‹             |
| ?â€‹                                  | `isApp` (If merchant is redirecting user from an app or a mobile device)â€‹                               |
| ?â€‹                                  | `skipLandingPage` (`True` = skip landing page by sending notification directly toÂ user)â€‹                |

### Charges

See:
[Charges](https://vippsas.github.io/vipps-developer-docs/docs/APIs/recurring-api/vipps-recurring-api#charges).

| MOBILEPAY ONE-OFFâ€‹                    | VIPPS MOBILEPAY INITIAL CHARGEâ€‹                                                                 |
|--------------------------------------|------------------------------------------------------------------------------------------------|
| `Amount` (kroner.Ã¸re)               â€‹ | `Amount` (Ã¸re)â€‹                                                                                 |
| `External_idâ€‹`                        | `OrderId` (ifÂ NULL â†’Â autogenerated)â€‹                                                           |
| `Descriptionâ€‹`                        | `Descriptionâ€‹`                                                                                  |
| `Expiration_timeout_minutesâ€‹`         | ?â€‹                                                                                              |
| ?â€‹                                    | `transactionType` (`RESERVE_CAPTURE`, `DIRECT_CAPTURE`)â€‹                                        |
|                                      |  |
| MOBILEPAY RESPONSE FROM AGREEMENT    | VIPPS MOBILEPAY RESPONSE FROM AGREEMENT                                                        |
| `Id`                                 | `agreementId`                                                                                  |
| `links["rel", "href"]`               | `vippsConfirmationUrl`                                                                         |
| `one_off_payment_id`                 | `chargeId`                                                                                     |

## Invoice vs. ePayment

See:
* [ePayment API](https://vippsas.github.io/vipps-developer-docs/docs/APIs/epayment-api)
* [Extend payment time-outs](https://developer.vippsmobilepay.com/docs/vipps-solutions/long-expiry-time-for-payments-to-merchants)

| MOBILEPAY INVOICEâ€‹                    | VIPPS MOBILEPAY EPAYMENTâ€‹                                                                        |
|--------------------------------------|-------------------------------------------------------------------------------------------------|
| `InvoiceIssuerâ€‹`                      | `Merchant-Serial-Number`Â (Header in request)                                                   â€‹ |
| `ConsumerAliasÂ {Alias,Â AliasType}`  â€‹ | `Customer {Alias} (Example: 4512345678)`                                                        |
| `TotalAmountâ€‹`                        | `AmountÂ {currency,Â value(Ã¸re)}â€‹`                                                                 |
| `InvoiceNumber` / `PaymentReferenceâ€‹` | `reference` /Â `paymentDescription`                                                             â€‹ |
| `DueDateâ€‹`                            | `expiresAt`Â (10min â†’ 28Â days.Â Example: 2023-02-26T17:32:28)â€‹                                    |
| (`InvoiceLink`)Â `RedirectUrl`       â€‹ | `returnUrl`Â (The URL the user is redirected to after the payment session).â€‹                      |
| `Commentâ€‹`                            | ?â€‹ |
| `ConsumerAddressLinesÂ []`            | ?â€‹ |
| `DeliveryAddressLinesÂ []`            | ?â€‹ |
| `ConsumerNameâ€‹`                       | ?â€‹ |
| `TotalVATAmountâ€‹`                     | ?â€‹ |
| `IssueDate`                          | ?â€‹ |
| `OrderDate`                          | ?â€‹ |
| `OrderDate`                          | ?â€‹ |
| `DeliveryDateâ€‹`                       | ?â€‹ |
| `MerchantContactName`                | ?â€‹ |
| `MerchantOrderNumber`                | ?â€‹ |
| `BuyerOrderNumberâ€‹`                   | ?â€‹ |
| `InvoiceUrl`+Â `InvoiceArticlesÂ []`â€‹   | See [Order Management API](https://developer.vippsmobilepay.com/docs/APIs/order-management-api) |
| ?                                   â€‹ | `paymentDescriptionâ€‹`                                                                            |
| ?â€‹                                    | `profile`Â (scope)â€‹                                                                               |
| ?                                   â€‹ | `paymentMethod` (`WALLET` or `CARD`. `CARD` â†’ WEB_REDIRECT)â€‹                                    |
| ?â€‹                                    | `userFlow`Â (`Push_message`, `Native_redirect`, `Web_redirect`, `QR`)                           â€‹ |
| ?â€‹                                    | `qrFormatÂ {format, size}` (only applicable when `userFlow` is set to `QR`)                         â€‹ |
| ?â€‹                                    | `customerInteraction` (`Customer_present`, `Customer_not_present`)â€‹                              |
| ?â€‹                                    | `industryData`Â (Additional compliance data related to the transaction)â€‹                          |


<!-- START_COMMENT -->

## Point of Sale vs. ePayment

See:
[ePayment API](https://vippsas.github.io/vipps-developer-docs/docs/APIs/epayment-api).

| Point of Sale                                          â€‹ | EPAYMENT                     |
|---------------------------------------------------------|------------------------------|
| **InitiatePayment**                                     |                              |
| `Authorization` *(Header parameter used in all requests)* | `Ocp-Apim-Subscription-Key`  |
| `X-MobilePay-Client-System-Version` *(Header parameter used in all requests)* |          |
| `X-MobilePay-Idempotency-Key`                           |                              |
| `X-MobilePay-Merchant-VAT-Number`                       |                              |
| `Amount`                                                |                              |
| `currencyCode`                                          |                              |
| `orderId`                                               |                              |
| `plannedCaptureDelay`                                   |                              |
| `posId`                                                 |                              |
| `restrictions`                                          |                              |
| `merchantPaymentLabel`                                  |                              |
|                                                         |                              |
| **InitiatePayment Response**                            |                              |
| `PaymentId`                                             |                              |
|                                                         |                              |
| **QueryPayment**                                        |                              |
| `paymentid`                                             |                              |
| `Authorization`                                         |                              |
| `X-MobilePay-Client-System-Version`                     |                              |
| `X-MobilePay-Merchant-VAT-Number`                       |                              |
| `QueryPayment Response`                                 |                              |
|                                                         |                              |
| **QueryPaymentIds**                                     |                              |
| `posId`                                                 | `Ocp-Apim-Subscription-Key`  |
| `orderId`                                               |                              |
| `state`                                                 |                              |
|                                                         |                              |
| **QueryPaymentIds Response**                            |                              |
| `PaymentIds: [ ]`                                       |                              |
|                                                         |                              |
| **QueryPayment**                                        |                              |
| `paymentid`                                             |                              |
| `Authorization`                                         |                              |
| `X-MobilePay-Client-System-Version`                     |                              |
| `X-MobilePay-Merchant-VAT-Number`                       |                              |

<!-- END_COMMENT -->
