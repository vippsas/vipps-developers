<!-- START_METADATA
---
title: MobilePay migration guide
sidebar_label: Migration guide
sidebar_position: 10
pagination_next: null
pagination_prev: null
draft: false
---
END_METADATA -->

# Migration guide

<!-- START_COMMENT -->

‚ÑπÔ∏è Please use the website:
[Vipps MobilePay Technical Documentation](https://developer.vippsmobilepay.com/).

<!-- END_COMMENT -->

üí• Work in progress üí•

A quick summary of key facts and shortcuts for our APIs‚Äã.

## Subscriptions vs. Recurring

API documentation:
* [ePayment API](https://vippsas.github.io/vipps-developer-docs/docs/APIs/epayment-api)
* [Recurring API](https://vippsas.github.io/vipps-developer-docs/docs/APIs/recurring-api)
* [MobilePay Subscriptions API](https://developer.mobilepay.dk/api/subscriptions)

### Agreement

See:
[Agreements](https://vippsas.github.io/vipps-developer-docs/docs/APIs/recurring-api/vipps-recurring-api#agreements).

| MOBILEPAY AGREEMENT               ‚Äã | VIPPS MOBILEPAY AGREEMENT‚Äã                                                                              |
|------------------------------------|--------------------------------------------------------------------------------------------------------|
| `Description¬†‚Äã`                     | `productDescription‚Äã`                                                                                   |
| `Amount‚Äã`                           | `pricing: { "type"("LEGACY" => amount ,"VARIABLE" =>¬†suggestedMaxAmount),¬†"currency"("NOK") }`        ‚Äã |
| `Frequency‚Äã`                        | `interval: { "unit"("YEAR" "MONTH" "WEEK" "DAY"), "count"([1..31]) }`                                 ‚Äã |
| `Links`: [`user-redirect`, `success-callback`, `cancel-callback`, `cancel-redirect`]¬† | `merchantRedirectUrl` + `merchantAgreementUrl‚Äã`      |
| `Plan‚Äã`                             | `productName‚Äã`                                                                                          |
| `mobile_phone_number‚Äã`              | `phoneNumber‚Äã`                                                                                          |
| `external_id‚Äã`                      | `externalId‚Äã` |
| `currency‚Äã`                         | ?‚Äã |
| `country_code‚Äã`                     | ?‚Äã |
| `expiration_timeout_minutes‚Äã`       | ?‚Äã |
| `retention_period_hours‚Äã`           | ?‚Äã |
| `disable_notification_management‚Äã`  | ?‚Äã |
| `notifications_on‚Äã`                 | ?‚Äã |
| ?‚Äã                                  | `scope` (Space separated list of the user profile-data scope to require for the¬†agreement)‚Äã             |
| ?‚Äã                                  | `isApp` (If merchant is redirecting user from an app or a mobile device)‚Äã                               |
| ?‚Äã                                  | `skipLandingPage` (`True` = skip landing page by sending notification directly to¬†user)‚Äã                |

### Charges

See:
[Charges](https://vippsas.github.io/vipps-developer-docs/docs/APIs/recurring-api/vipps-recurring-api#charges).

| MOBILEPAY ONE-OFF‚Äã                    | VIPPS MOBILEPAY INITIAL CHARGE‚Äã                                                                 |
|--------------------------------------|------------------------------------------------------------------------------------------------|
| `Amount` (kroner.√∏re)               ‚Äã | `Amount` (√∏re)‚Äã                                                                                 |
| `External_id‚Äã`                        | `OrderId` (if¬†NULL =>¬†autogenerated)‚Äã                                                           |
| `Description‚Äã`                        | `Description‚Äã`                                                                                  |
| `Expiration_timeout_minutes‚Äã`         | ?‚Äã                                                                                              |
| ?‚Äã                                    | `transactionType` (`RESERVE_CAPTURE`, `DIRECT_CAPTURE`)‚Äã                                        |
|                                      |  |
| MOBILEPAY RESPONSE FROM AGREEMENT    | VIPPS MOBILEPAY RESPONSE FROM AGREEMENT                                                        |
| `Id`                                 | `agreementId`                                                                                  |
| `links["rel", "href"]`               | `vippsConfirmationUrl`                                                                         |
| `one_off_payment_id`                 | `chargeId`                                                                                     |

## Invoice vs. ePayment

See:
* [ePayment API](https://vippsas.github.io/vipps-developer-docs/docs/APIs/epayment-api)
* [Extend payment time-outs](https://developer.vippsmobilepay.com/docs/vipps-solutions/long-expiry-time-for-payments-to-merchants)

| MOBILEPAY INVOICE‚Äã                    | VIPPS MOBILEPAY EPAYMENT‚Äã                                                                        |
|--------------------------------------|-------------------------------------------------------------------------------------------------|
| `InvoiceIssuer‚Äã`                      | `Merchant-Serial-Number`¬†(Header in request)                                                   ‚Äã |
| `ConsumerAlias¬†{Alias,¬†AliasType}`  ‚Äã | `Customer {Alias} (Example: 4512345678)`                                                        |
| `TotalAmount‚Äã`                        | `Amount¬†{currency,¬†value(√∏re)}‚Äã`                                                                 |
| `InvoiceNumber` / `PaymentReference‚Äã` | `reference` /¬†`paymentDescription`                                                             ‚Äã |
| `DueDate‚Äã`                            | `expiresAt`¬†(10min -> 28¬†days.¬†Example: 2023-02-26T17:32:28)‚Äã                                    |
| (`InvoiceLink`)¬†`RedirectUrl`       ‚Äã | `returnUrl`¬†(The URL the user is redirected to after the payment session).‚Äã                      |
| `Comment‚Äã`                            | ?‚Äã |
| `ConsumerAddressLines¬†[]`            | ?‚Äã |
| `DeliveryAddressLines¬†[]`            | ?‚Äã |
| `ConsumerName‚Äã`                       | ?‚Äã |
| `TotalVATAmount‚Äã`                     | ?‚Äã |
| `IssueDate`                          | ?‚Äã |
| `OrderDate`                          | ?‚Äã |
| `OrderDate`                          | ?‚Äã |
| `DeliveryDate‚Äã`                       | ?‚Äã |
| `MerchantContactName`                | ?‚Äã |
| `MerchantOrderNumber`                | ?‚Äã |
| `BuyerOrderNumber‚Äã`                   | ?‚Äã |
| `InvoiceUrl`+¬†`InvoiceArticles¬†[]`‚Äã   | See [Order Management API](https://developer.vippsmobilepay.com/docs/APIs/order-management-api) |
| ?                                   ‚Äã | `paymentDescription‚Äã`                                                                            |
| ?‚Äã                                    | `profile`¬†(scope)‚Äã                                                                               |
| ?                                   ‚Äã | `paymentMethod` (`WALLET` or `CARD`. `CARD` => WEB_REDIRECT)‚Äã                                    |
| ?‚Äã                                    | `userFlow`¬†(`Push_message`, `Native_redirect`, `Web_redirect`, `QR`)                           ‚Äã |
| ?‚Äã                                    | `qrFormat¬†{format, size}` (only applicable when¬†userFlow¬†is set to QR)                         ‚Äã |
| ?‚Äã                                    | `customerInteraction` (`Customer_present`, `Customer_not_present`)‚Äã                              |
| ?‚Äã                                    | `industryData`¬†(Additional compliance data related to the transaction)‚Äã                          |


<!-- START_COMMENT -->

## Point of Sale vs. ePayment

See:
[ePayment API](https://vippsas.github.io/vipps-developer-docs/docs/APIs/epayment-api).

| Point of Sale                                          ‚Äã | EPAYMENT                     |
|---------------------------------------------------------|------------------------------|
| **InitiatePayment**                                     |                              |
| `Authorization` *(Header parameter used in all requests)* | `Ocp-Apim-Subscription-Key`  |
| `X-MobilePay-Client-System-Version` *(Header parameter used in all requests)* |          |
| `X-MobilePay-Idempotency-Key`                           |                              |
| `X-MobilePay-Merchant-VAT-Number`                       |                              |
| `Amount`                                                |                              |
| `currencyCode`                                          |                              |
| `orderId`                                               |                              |
| `plannedCaptureDelay`                                   |                              |
| `posId`                                                 |                              |
| `restrictions`                                          |                              |
| `merchantPaymentLabel`                                  |                              |
|                                                         |                              |
| **InitiatePayment Response**                            |                              |
| `PaymentId`                                             |                              |
|                                                         |                              |
| **QueryPayment**                                        |                              |
| `paymentid`                                             |                              |
| `Authorization`                                         |                              |
| `X-MobilePay-Client-System-Version`                     |                              |
| `X-MobilePay-Merchant-VAT-Number`                       |                              |
| `QueryPayment Response`                                 |                              |
|                                                         |                              |
| **QueryPaymentIds**                                     |                              |
| `posId`                                                 | `Ocp-Apim-Subscription-Key`  |
| `orderId`                                               |                              |
| `state`                                                 |                              |
|                                                         |                              |
| **QueryPaymentIds Response**                            |                              |
| `PaymentIds: [ ]`                                       |                              |
|                                                         |                              |
| **QueryPayment**                                        |                              |
| `paymentid`                                             |                              |
| `Authorization`                                         |                              |
| `X-MobilePay-Client-System-Version`                     |                              |
| `X-MobilePay-Merchant-VAT-Number`                       |                              |

<!-- END_COMMENT -->
